"use strict";var Event={};Event=Event||{},Event.Widget=Event.Widget||{},Event.Widget.TemplateParser=function(t){function e(){this.init()}var o="http",n="api.helsingborg.se",a="/json/",i=a+"wp/v2/event/",l=o+"://"+n+i;return e.prototype.init=function(){t(".event-api").each(function(e,o){this.storeErrorTemplate(t(o)),this.storeTemplate(t(o)),this.storeModalTemplate(t(o)),this.loadEvent(t(o),l)}.bind(this))},e.prototype.storeTemplate=function(e){e.data("template",t(".template",e).html()),e.find(".template").remove()},e.prototype.storeErrorTemplate=function(e){e.data("error-template",t(".error-template",e).html()),e.find(".error-template").remove()},e.prototype.storeModalTemplate=function(e){e.data("modal-template",t(".modal-template",e).html()),e.find(".modal-template").remove()},e.prototype.loadEvent=function(e,o){t.ajax(o).done(function(o){"undefined"==typeof o.data?(this.clear(e),t(o).each(function(t,o){var n=e.data("template");n=n.replace("{{event-id}}",o.id),n=n.replace("{{event-title}}",o.title.rendered),e.append(n)}),this.click(e)):(this.clear(e),e.html(e.data("error-template")))}.bind(this)).fail(function(){this.clear(e),e.html(e.data("error-template"))}.bind(this))},e.prototype.loadFeaturedImage=function(e,o){t.ajax(e).done(function(t){console.log(t)}.bind(this)).fail(function(){console.log("Could not load the media id.")}.bind(this))},e.prototype.loadContactPerson=function(e,o){t.ajax(e).done(function(t){console.log(t)}.bind(this)).fail(function(){console.log("Could not load contact person.")}.bind(this))},e.prototype.loadLocation=function(e,o){t.ajax(e).done(function(t){console.log(t)}.bind(this)).fail(function(){console.log("Could not load location details.")}.bind(this))},e.prototype.clear=function(t){jQuery(t).html("")},e.prototype.click=function(e){jQuery("li a",e).bind("click",{module:e},function(o){var n=e.data("modal-template");n=n.replace("{{event-modal-id}}",""),n=n.replace("{{event-modal-title}}",""),n=n.replace("{{event-modal-content}}",""),n=n.replace("{{event-modal-image}}",""),t("body").append(n),this.loadLocation("",e),this.loadContactPerson("",e),this.loadFeaturedImage("",e)}.bind(this))},new e}(jQuery);